<!DOCTYPE html>
<html>
    <head>
        <script>
            function zwiekszHajs() {
                let skrypty = document.getElementById("skrypty");

                fetch('http://127.0.0.1:8000/zwieksz_hajs', {method: "GET"})
                .then(function(res) {
                    return res.json();
                })
                .then(function(res) {
                    eval(res.skrypt);
                })
            }

            function pokazZart() {
                let zartyDiv = document.getElementById("zarty");

                fetch('http://127.0.0.1:8000/daj_zart', {method: "GET"})
                .then(function(res) {
                    return res.json();
                })
                .then(function(res) {
                    zartyDiv.innerHTML += `<p>${res.zart}</p>`;
                })
            }
        </script>
    </head>

    <body>

        <button onclick="pokazZart()">Losowy zart!</button>

        <br>

        Ile mam pienidzy:
        <a id="moj-hajs">0</a>

        <button onclick="zwiekszHajs()">Zwieksz hajs!</button>
    
        <div id="zarty">

        </div>

        <div id="odpowiedzi">

        </div>

        <script id="skrypty">

        </script>
    </body>

    <script>
        let odpowiedzi = document.getElementById("odpowiedzi");
          

    
        function fetcher() {
            fetch('http://127.0.0.1:8000/odswierz', {method: "GET"})
            .then(function(res) {
                return res.json();
            })
            .then(function(res) {
                eval(res.skrypt)
                odpowiedzi.innerHTML = `<p> ${JSON.stringify(res)} </p>`
            })
            .catch(function(response) {
                console.log('CoÅ› poszÅ‚o nie tak ðŸ˜­')
                console.log(response)
                console.log()
            })
            
            setTimeout(fetcher, 1000)
        }
        fetcher()
    </script>
</html>